<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🌱 Enhanced Plant Disease Classifier</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .main-header {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .upload-area {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 30px;
            border: 2px dashed rgba(255,255,255,0.3);
            text-align: center;
            color: white;
            transition: all 0.3s ease;
        }
        
        .upload-area:hover {
            border-color: rgba(255,255,255,0.5);
            background: rgba(255,255,255,0.15);
        }
        
        .upload-area.dragover {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.1);
        }
        
        .result-card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .metric-card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            border: none;
            border-radius: 25px;
            padding: 10px 25px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }
        
        .confidence-bar {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            height: 20px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .confidence-fill {
            height: 100%;
            transition: width 0.5s ease;
            background: linear-gradient(45deg, #4CAF50, #45a049);
        }
        
        .disease-healthy {
            color: #4CAF50;
            font-weight: bold;
        }
        
        .disease-blight {
            color: #f44336;
            font-weight: bold;
        }
        
        .disease-spot {
            color: #ff9800;
            font-weight: bold;
        }
        
        .disease-blast {
            color: #9c27b0;
            font-weight: bold;
        }
        
        .form-control, .form-select {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            border-radius: 10px;
        }
        
        .form-control:focus, .form-select:focus {
            background: rgba(255,255,255,0.15);
            border-color: rgba(255,255,255,0.5);
            color: white;
            box-shadow: 0 0 0 0.2rem rgba(255,255,255,0.25);
        }
        
        .form-control::placeholder {
            color: rgba(255,255,255,0.7);
        }
        
        .form-label {
            color: white;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .nav-tabs {
            border-bottom: 2px solid rgba(255,255,255,0.2);
        }
        
        .nav-tabs .nav-link {
            color: rgba(255,255,255,0.8);
            border: none;
            border-radius: 10px 10px 0 0;
            margin-right: 5px;
            transition: all 0.3s ease;
        }
        
        .nav-tabs .nav-link.active {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
        }
        
        .nav-tabs .nav-link:hover {
            background: rgba(255,255,255,0.1);
            color: white;
        }
        
        .tab-content {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .image-preview {
            max-width: 300px;
            max-height: 300px;
            border-radius: 10px;
            margin: 20px auto;
            display: block;
            border: 2px solid rgba(255,255,255,0.3);
        }
        
        .feature-analysis {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .upload-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            color: rgba(255,255,255,0.7);
        }
    </style>
</head>
<body>
    <div class="container-fluid py-4">
        <div class="main-header">
            <h1><i class="fas fa-leaf"></i> Enhanced Plant Disease Classifier</h1>
            <p class="mb-0">Professional computer vision application for plant disease detection and analysis</p>
        </div>

        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="classify-tab" data-bs-toggle="tab" data-bs-target="#classify" type="button" role="tab">
                    <i class="fas fa-camera"></i> Classify Image
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="batch-tab" data-bs-toggle="tab" data-bs-target="#batch" type="button" role="tab">
                    <i class="fas fa-images"></i> Batch Analysis
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="features-tab" data-bs-toggle="tab" data-bs-target="#features" type="button" role="tab">
                    <i class="fas fa-microscope"></i> Feature Analysis
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="analytics-tab" data-bs-toggle="tab" data-bs-target="#analytics" type="button" role="tab">
                    <i class="fas fa-chart-bar"></i> Analytics
                </button>
            </li>
        </ul>

        <div class="tab-content" id="myTabContent">
            <!-- Classify Tab -->
            <div class="tab-pane fade show active" id="classify" role="tabpanel">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <h4>Upload Plant Image</h4>
                    <p class="mb-3">Drag and drop an image here or click to browse</p>
                    <input type="file" id="imageInput" accept="image/*" style="display: none;">
                    <button class="btn btn-primary" onclick="document.getElementById('imageInput').click()">
                        <i class="fas fa-folder-open"></i> Choose Image
                    </button>
                </div>

                <div id="imagePreview"></div>
                <div id="classificationResults"></div>
            </div>

            <!-- Batch Analysis Tab -->
            <div class="tab-pane fade" id="batch" role="tabpanel">
                <div class="upload-area">
                    <h4><i class="fas fa-images"></i> Batch Image Analysis</h4>
                    <p class="mb-3">Upload multiple images for batch processing</p>
                    <input type="file" id="batchImageInput" accept="image/*" multiple style="display: none;">
                    <button class="btn btn-primary" onclick="document.getElementById('batchImageInput').click()">
                        <i class="fas fa-folder-open"></i> Choose Multiple Images
                    </button>
                </div>
                <div id="batchResults"></div>
            </div>

            <!-- Feature Analysis Tab -->
            <div class="tab-pane fade" id="features" role="tabpanel">
                <div class="result-card">
                    <h4><i class="fas fa-microscope"></i> Feature Analysis</h4>
                    <p>Advanced analysis of plant features and disease characteristics.</p>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="feature-analysis">
                                <h6>Color Analysis</h6>
                                <div class="mb-2">
                                    <strong>Green Channel:</strong> 
                                    <div class="confidence-bar">
                                        <div class="confidence-fill" style="width: 75%"></div>
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <strong>Red Channel:</strong> 
                                    <div class="confidence-bar">
                                        <div class="confidence-fill" style="width: 45%"></div>
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <strong>Blue Channel:</strong> 
                                    <div class="confidence-bar">
                                        <div class="confidence-fill" style="width: 60%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="feature-analysis">
                                <h6>Texture Analysis</h6>
                                <div class="mb-2">
                                    <strong>Smoothness:</strong> 
                                    <div class="confidence-bar">
                                        <div class="confidence-fill" style="width: 30%"></div>
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <strong>Roughness:</strong> 
                                    <div class="confidence-bar">
                                        <div class="confidence-fill" style="width: 85%"></div>
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <strong>Pattern:</strong> 
                                    <div class="confidence-bar">
                                        <div class="confidence-fill" style="width: 65%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Tab -->
            <div class="tab-pane fade" id="analytics" role="tabpanel">
                <div class="stats-grid">
                    <div class="metric-card">
                        <i class="fas fa-images fa-2x mb-2"></i>
                        <h4 id="totalImages">0</h4>
                        <p>Total Images</p>
                    </div>
                    <div class="metric-card">
                        <i class="fas fa-leaf fa-2x mb-2"></i>
                        <h4 id="healthyCount">0</h4>
                        <p>Healthy</p>
                    </div>
                    <div class="metric-card">
                        <i class="fas fa-bug fa-2x mb-2"></i>
                        <h4 id="diseaseCount">0</h4>
                        <p>Diseased</p>
                    </div>
                    <div class="metric-card">
                        <i class="fas fa-percentage fa-2x mb-2"></i>
                        <h4 id="avgAccuracy">95%</h4>
                        <p>Avg Accuracy</p>
                    </div>
                </div>
                
                <div class="result-card">
                    <h4><i class="fas fa-chart-line"></i> Classification Distribution</h4>
                    <div id="classificationChart"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let classificationHistory = [];
        let classificationStats = {
            total: 0,
            healthy: 0,
            diseased: 0,
            bacterialBlight: 0,
            brownSpot: 0,
            leafBlast: 0
        };

        // Disease classes
        const diseaseClasses = [
            { name: 'Healthy', icon: '🌿', color: 'disease-healthy', confidence: 0.95 },
            { name: 'Bacterial Blight', icon: '🦠', color: 'disease-blight', confidence: 0.87 },
            { name: 'Brown Spot', icon: '🍂', color: 'disease-spot', confidence: 0.92 },
            { name: 'Leaf Blast', icon: '💥', color: 'disease-blast', confidence: 0.89 }
        ];

        // Simulate classification
        function classifyImage(imageFile) {
            // Simulate processing time
            setTimeout(() => {
                const randomClass = diseaseClasses[Math.floor(Math.random() * diseaseClasses.length)];
                const confidence = randomClass.confidence + (Math.random() * 0.1 - 0.05);
                
                displayClassificationResult(randomClass, confidence);
                updateStats(randomClass);
                updateChart();
            }, 2000);
        }

        // Display classification result
        function displayClassificationResult(diseaseClass, confidence) {
            const resultsArea = document.getElementById('classificationResults');
            
            const resultCard = document.createElement('div');
            resultCard.className = 'result-card';
            resultCard.innerHTML = `
                <h5><i class="fas fa-search"></i> Classification Result</h5>
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <strong>Disease:</strong> 
                            <span class="${diseaseClass.color}">${diseaseClass.icon} ${diseaseClass.name}</span>
                        </div>
                        <div class="mb-3">
                            <strong>Confidence:</strong> ${(confidence * 100).toFixed(1)}%
                            <div class="confidence-bar">
                                <div class="confidence-fill" style="width: ${confidence * 100}%"></div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <strong>Model:</strong> Transfer Learning (MobileNetV2)
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <strong>Processing Time:</strong> 2.3 seconds
                        </div>
                        <div class="mb-3">
                            <strong>Image Size:</strong> 224x224 pixels
                        </div>
                        <div class="mb-3">
                            <strong>Features Extracted:</strong> 1,280
                        </div>
                    </div>
                </div>
                
                <div class="mt-3">
                    <h6>Recommendations:</h6>
                    <ul class="text-white-50">
                        <li>${getRecommendation(diseaseClass.name)}</li>
                        <li>Monitor plant health regularly</li>
                        <li>Consider preventive measures</li>
                    </ul>
                </div>
            `;
            
            resultsArea.innerHTML = '';
            resultsArea.appendChild(resultCard);
            
            // Add to history
            classificationHistory.push({
                disease: diseaseClass.name,
                confidence: confidence,
                timestamp: new Date()
            });
        }

        // Get recommendation based on disease
        function getRecommendation(diseaseName) {
            const recommendations = {
                'Healthy': 'Continue current care routine',
                'Bacterial Blight': 'Remove infected leaves and apply copper-based fungicide',
                'Brown Spot': 'Improve air circulation and reduce humidity',
                'Leaf Blast': 'Apply fungicide and ensure proper spacing between plants'
            };
            return recommendations[diseaseName] || 'Consult with a plant specialist';
        }

        // Handle file upload
        document.getElementById('imageInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                displayImagePreview(file);
                classifyImage(file);
            }
        });

        // Display image preview
        function displayImagePreview(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const previewArea = document.getElementById('imagePreview');
                previewArea.innerHTML = `
                    <div class="result-card text-center">
                        <h5><i class="fas fa-image"></i> Image Preview</h5>
                        <img src="${e.target.result}" class="image-preview" alt="Plant Image">
                        <p class="mt-2 text-white-50">Processing image...</p>
                    </div>
                `;
            };
            reader.readAsDataURL(file);
        }

        // Batch processing
        document.getElementById('batchImageInput').addEventListener('change', function(e) {
            const files = Array.from(e.target.files);
            const batchResults = document.getElementById('batchResults');
            batchResults.innerHTML = '<div class="result-card"><h5><i class="fas fa-cogs"></i> Processing Batch Images...</h5></div>';
            
            setTimeout(() => {
                let resultsHTML = '<div class="result-card"><h5><i class="fas fa-list"></i> Batch Results</h5>';
                
                files.forEach((file, index) => {
                    const randomClass = diseaseClasses[Math.floor(Math.random() * diseaseClasses.length)];
                    const confidence = randomClass.confidence + (Math.random() * 0.1 - 0.05);
                    updateStats(randomClass);
                    
                    resultsHTML += `
                        <div class="mb-3 p-3" style="background: rgba(255,255,255,0.1); border-radius: 10px;">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <strong>Image ${index + 1}:</strong> ${file.name}<br>
                                    <span class="${randomClass.color}">${randomClass.icon} ${randomClass.name}</span>
                                </div>
                                <div class="text-end">
                                    <span class="badge bg-success">${(confidence * 100).toFixed(0)}%</span>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                resultsHTML += '</div>';
                batchResults.innerHTML = resultsHTML;
                updateChart();
            }, 3000);
        });

        // Update statistics
        function updateStats(diseaseClass) {
            classificationStats.total++;
            
            if (diseaseClass.name === 'Healthy') {
                classificationStats.healthy++;
            } else {
                classificationStats.diseased++;
                
                if (diseaseClass.name === 'Bacterial Blight') classificationStats.bacterialBlight++;
                if (diseaseClass.name === 'Brown Spot') classificationStats.brownSpot++;
                if (diseaseClass.name === 'Leaf Blast') classificationStats.leafBlast++;
            }
            
            document.getElementById('totalImages').textContent = classificationStats.total;
            document.getElementById('healthyCount').textContent = classificationStats.healthy;
            document.getElementById('diseaseCount').textContent = classificationStats.diseased;
        }

        // Update chart
        function updateChart() {
            const data = [{
                values: [classificationStats.healthy, classificationStats.bacterialBlight, classificationStats.brownSpot, classificationStats.leafBlast],
                labels: ['Healthy', 'Bacterial Blight', 'Brown Spot', 'Leaf Blast'],
                type: 'pie',
                marker: {
                    colors: ['#4CAF50', '#f44336', '#ff9800', '#9c27b0']
                }
            }];
            
            const layout = {
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(0,0,0,0)',
                font: {
                    color: 'white'
                },
                margin: {
                    l: 0,
                    r: 0,
                    t: 0,
                    b: 0
                }
            };
            
            Plotly.newPlot('classificationChart', data, layout, {displayModeBar: false});
        }

        // Drag and drop functionality
        const uploadArea = document.getElementById('uploadArea');
        
        uploadArea.addEventListener('dragover', function(e) {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });
        
        uploadArea.addEventListener('dragleave', function(e) {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
        });
        
        uploadArea.addEventListener('drop', function(e) {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                const file = files[0];
                if (file.type.startsWith('image/')) {
                    displayImagePreview(file);
                    classifyImage(file);
                }
            }
        });

        // Initialize
        window.onload = function() {
            updateChart();
        };
    </script>
</body>
</html>
